(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{232:function(t,e){t.exports=function(data,t,e,n){var r=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(o)}),200)}}},282:function(t,e,n){"use strict";n.r(e);n(15),n(16),n(10),n(37),n(26),n(84),n(31);var r=n(8),o=n(13),c=n(53),l=n(19),d=n(20),f=n(9),m=n(7),v=n(33),h=n(232),w=n.n(h);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var R=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){Object(l.a)(h,t);var e,n,d,f,m,v=y(h);function h(){var t;return Object(o.a)(this,h),(t=v.apply(this,arguments)).loadingDownload=!1,t.loadingDelete=!1,t.loading=!1,t.loadingSave=!1,t.team={},t.ipRestrictions=[],t}return Object(c.a)(h,[{key:"created",value:(m=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get());case 1:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"get",value:(f=Object(r.a)(regeneratorRuntime.mark((function t(){var e,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$axios.get("/groups/".concat(this.$route.params.id));case 4:e=t.sent,data=e.data,this.team=data,this.team.ipRestrictions&&(this.ipRestrictions=(this.team.ipRestrictions||[]).split(",").map((function(i){return i.trim()}))),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return f.apply(this,arguments)})},{key:"save",value:(d=Object(r.a)(regeneratorRuntime.mark((function t(){var e,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingSave=!0,t.prev=1,t.next=4,this.$axios.patch("/groups/".concat(this.$route.params.id),{name:this.team.name,ipRestrictions:this.ipRestrictions.join(", ")||void 0,forceTwoFactor:this.team.forceTwoFactor});case 4:e=t.sent,data=e.data,this.team=data.updated,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:this.loadingSave=!1;case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"download",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingDownload=!0,t.prev=1,t.next=4,this.$axios.get("/groups/".concat(this.$route.params.id,"/data"));case 4:e=t.sent,data=e.data,w()(JSON.stringify(data,null,2),"".concat(data.id,"-").concat((new Date).toISOString(),".json")),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:this.loadingDownload=!1;case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"deleteAccount",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$buefy.dialog.confirm({title:"Deleting team",message:"Are you sure you want to delete this team? This action is not reversible, and all your subscriptions will be canceled.",confirmText:"Yes, delete",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingDelete=!0,t.prev=1,t.next=4,e.$axios.delete("/groups/".concat(e.$route.params.id));case 4:t.sent.data,e.$store.dispatch("auth/logout"),e.$router.push("/"),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),h}(v.b),k=x=R([Object(v.a)({middleware:"authenticated",layout:"teams"})],x),O=n(11),component=Object(O.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"is-size-4 mb-4"},[t._v("Data and security")]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[n("b-field",{attrs:{label:"Team name"}},[n("b-input",{attrs:{type:"text",required:""},model:{value:t.team.name,callback:function(e){t.$set(t.team,"name",e)},expression:"team.name"}})],1),t._v(" "),n("b-field",{attrs:{label:"IP address restrictions"}},[n("b-taginput",{attrs:{icon:"ip-network",placeholder:"Add an IP CIDR"},model:{value:t.ipRestrictions,callback:function(e){t.ipRestrictions=e},expression:"ipRestrictions"}})],1),t._v(" "),n("b-field",[n("b-checkbox",{model:{value:t.team.forceTwoFactor,callback:function(e){t.$set(t.team,"forceTwoFactor",e)},expression:"team.forceTwoFactor"}},[t._v("Force team members to enable two-factor authentication")])],1),t._v(" "),n("div",[n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:t.loadingSave}},[t._v("Update team settings")])],1),t._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:t.loading},on:{"update:active":function(e){t.loading=e}}})],1),t._v(" "),n("h2",{staticClass:"is-size-5 mb-3 mt-5"},[t._v("Download your data")]),t._v(" "),n("p",{staticClass:"mb-3"},[t._v("\n    You have the right to export all your data. You can download it in JSON\n    format to transfer it to other tools. This does not include an export of\n    your members' data.\n  ")]),t._v(" "),n("b-button",{attrs:{type:"is-primary",loading:t.loadingDownload,"icon-left":"cloud-download"},on:{click:t.download}},[t._v("Download your data")]),t._v(" "),n("h2",{staticClass:"is-size-5 mb-3 mt-5"},[t._v("Delete your data")]),t._v(" "),n("p",{staticClass:"mb-3"},[t._v("\n    You can delete your account and all its data permanently. If any of your\n    teams has multiple teams, it won't be deleted, and any paid subscriptions\n    will remain.\n  ")]),t._v(" "),n("b-button",{attrs:{type:"is-danger",loading:t.loadingDelete,"icon-left":"delete"},on:{click:t.deleteAccount}},[t._v("Delete your account")])],1)}),[],!1,null,null,null);e.default=component.exports}}]);