(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{241:function(e,t,n){var content=n(260);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("115c4774",content,!0,{sourceMap:!1})},259:function(e,t,n){"use strict";n(241)},260:function(e,t,n){(t=n(38)(!1)).push([e.i,"dl[data-v-5006d7d8]{-moz-columns:300px 2;columns:300px 2;line-height:1.8}dd[data-v-5006d7d8]{margin-left:1rem}",""]),e.exports=t},296:function(e,t,n){"use strict";n.r(t);n(15),n(16),n(10),n(37),n(26),n(84),n(31);var r=n(8),o=n(13),c=n(53),l=n(19),d=n(20),f=n(9),y=n(7),m=n(33);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var h=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(y.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},k=function(e){Object(l.a)(h,e);var t,n,d,f,y,m=v(h);function h(){var e;return Object(o.a)(this,h),(e=m.apply(this,arguments)).loading=!1,e.loadingUpdate=!1,e.loadingDelete=!1,e.apiKey={},e.scopes=[],e.ipRestrictions=[],e.referrerRestrictions=[],e.scopeOptions={},e}return Object(c.a)(h,[{key:"created",value:(y=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getScopeOptions(),e.abrupt("return",this.get());case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getScopeOptions",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/groups/".concat(this.$route.params.id,"/api-keys/scopes"));case 2:t=e.sent,data=t.data,this.scopeOptions=data;case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"get",value:(d=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/groups/".concat(this.$route.params.id,"/api-keys/").concat(this.$route.params.apiKeyId));case 4:t=e.sent,data=t.data,this.apiKey=data,this.scopes=(data.scopes||"").split(",").map((function(i){return i.trim()})),data.ipRestrictions&&(this.ipRestrictions=(data.ipRestrictions||[]).split(",").map((function(i){return i.trim()}))),data.referrerRestrictions&&(this.referrerRestrictions=(data.referrerRestrictions||[]).split(",").map((function(i){return i.trim()}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.$router.push("/groups/".concat(this.$route.params.id,"/developers/api-keys"));case 15:this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return d.apply(this,arguments)})},{key:"save",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingUpdate){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUpdate=!0,e.prev=3,e.next=6,this.$axios.patch("/groups/".concat(this.$route.params.id,"/api-keys/").concat(this.$route.params.apiKeyId),{name:this.apiKey.name,description:this.apiKey.description,scopes:this.scopes.join(", "),ipRestrictions:this.ipRestrictions.join(", ")||void 0,referrerRestrictions:this.referrerRestrictions.join(", ")||void 0});case 6:t=e.sent,data=t.data,this.apiKey=data.updated,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:this.loadingUpdate=!1;case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return n.apply(this,arguments)})},{key:"deleteApiKey",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingDelete){e.next=2;break}return e.abrupt("return");case 2:this.$buefy.dialog.confirm({title:"Deleting API key",message:"Are you sure you want to delete your API key <strong>".concat(n,"</strong>? This action is not reversible, and this API key will stop working immediately."),confirmText:"Yes, delete API key",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.loadingDelete=!0,e.prev=1,e.next=4,o.$axios.delete("/groups/".concat(o.$route.params.id,"/api-keys/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:o.$router.push("/teams/".concat(o.$route.params.id,"/developers/api-keys"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),h}(m.b),R=k=h([Object(m.a)({middleware:"authenticated",layout:"teams"})],k),x=(n(259),n(11)),component=Object(x.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"is-size-4 mb-4"},[n("b-button",{attrs:{tag:"nuxt-link",to:"/teams/"+e.$route.params.id+"/developers/api-keys","icon-right":"arrow-left"}}),e._v(" "),n("span",[e._v("API key")])],1),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("b-field",{attrs:{label:"Name"}},[n("b-input",{attrs:{type:"text"},model:{value:e.apiKey.name,callback:function(t){e.$set(e.apiKey,"name",t)},expression:"apiKey.name"}})],1),e._v(" "),n("b-field",{attrs:{label:"API key"}},[n("b-input",{attrs:{type:"text",readonly:""},model:{value:e.apiKey.apiKey,callback:function(t){e.$set(e.apiKey,"apiKey",t)},expression:"apiKey.apiKey"}})],1),e._v(" "),n("b-field",{attrs:{label:"Description"}},[n("b-input",{attrs:{type:"textarea"},model:{value:e.apiKey.description,callback:function(t){e.$set(e.apiKey,"description",t)},expression:"apiKey.description"}})],1),e._v(" "),n("b-field",{attrs:{label:"Scopes"}},[n("dl",e._l(Object.keys(e.scopeOptions),(function(t){return n("span",{key:"s"+t},[n("dt",[n("b-checkbox",{attrs:{indeterminate:e.scopes.some((function(n){return e.scopeOptions[t].map((function(i){return i.value})).includes(n)}))&&!e.scopeOptions[t].map((function(i){return i.value})).every((function(t){return e.scopes.includes(t)})),value:e.scopeOptions[t].map((function(i){return i.value})).every((function(t){return e.scopes.includes(t)}))},on:{input:function(n){return n?e.scopes.push.apply(e.scopes,e.scopeOptions[t].map((function(i){return i.value}))):e.scopes=e.scopes.filter((function(n){return!e.scopeOptions[t].map((function(i){return i.value})).includes(n)}))}}},[e._v(e._s(t))])],1),e._v(" "),e._l(e.scopeOptions[t],(function(r){return n("dd",{key:"s"+t+r.value},[n("b-checkbox",{attrs:{"native-value":r.value},model:{value:e.scopes,callback:function(t){e.scopes=t},expression:"scopes"}},[e._v("\n              "+e._s(r.name)+"\n            ")])],1)}))],2)})),0)]),e._v(" "),n("b-field",{attrs:{label:"IP address restrictions"}},[n("b-taginput",{attrs:{icon:"ip-network",placeholder:"Add an IP CIDR"},model:{value:e.ipRestrictions,callback:function(t){e.ipRestrictions=t},expression:"ipRestrictions"}})],1),e._v(" "),n("b-field",{attrs:{label:"Referrer restrictions"}},[n("b-taginput",{attrs:{icon:"domain-plus",placeholder:"Add a domain name"},model:{value:e.referrerRestrictions,callback:function(t){e.referrerRestrictions=t},expression:"referrerRestrictions"}})],1),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingUpdate}},[e._v("Update API key")])],1),e._v(" "),n("h2",{staticClass:"is-size-5 mb-3 mt-5"},[e._v("Danger zone")]),e._v(" "),n("p",{staticClass:"mb-3"},[e._v("\n    If your API key was compromized or you don't need it anymore, you can\n    delete it.\n  ")]),e._v(" "),n("b-button",{attrs:{type:"is-danger",loading:e.loadingDelete},on:{click:function(t){return e.deleteApiKey(e.apiKey.id,e.apiKey.name||"Unnamed API key")}}},[e._v("Delete API key")]),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}})],1)}),[],!1,null,"5006d7d8",null);t.default=component.exports}}]);