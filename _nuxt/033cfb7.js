(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{276:function(t,e,r){"use strict";r.r(e);r(15),r(16),r(10),r(37),r(61),r(31);var n=r(8),c=r(13),o=r(53),l=r(19),h=r(20),f=r(9),d=r(7),v=r(33),y=r(35);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var c=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var k=function(t,e,r,desc){var n,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(o=(c<3?n(o):c>3?n(e,r,o):n(e,r))||o);return c>3&&o&&Object.defineProperty(e,r,o),o},m=function(t){Object(l.a)(h,t);var e,r=j(h);function h(){var t;return Object(c.a)(this,h),(t=r.apply(this,arguments)).state="loading",t.subject="",t}return Object(o.a)(h,[{key:"mounted",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,c,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.$route.query.token,this.subject="string"==typeof this.$route.query.subject?this.$route.query.subject:"",n&&this.subject){t.next=4;break}return t.abrupt("return",this.state="error");case 4:return t.prev=4,t.next=7,this.$axios.post(this.tokenEndpoint,{token:n});case 7:if(c=t.sent,data=c.data,"password-reset"!==this.subject){t.next=11;break}return t.abrupt("return",this.$router.replace("/auth/recover?token=".concat(n)));case 11:if("login"!==this.subject){t.next=18;break}return t.next=14,this.$store.dispatch("auth/loginWithTokens",data);case 14:if(o=this.$store.state.auth.user.memberships,null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.length){t.next=17;break}return t.abrupt("return",this.$router.replace("/onboarding/user"));case 17:this.$router.replace("/teams/".concat(null===(r=null==o?void 0:o.data[0])||void 0===r?void 0:r.groupId));case 18:this.state="success",t.next=23;break;case 21:t.prev=21,t.t0=t.catch(4);case 23:case"end":return t.stop()}}),t,this,[[4,21]])}))),function(){return e.apply(this,arguments)})},{key:"tokenEndpoint",get:function(){switch(this.$route.query.subject){case"email-verify":return"/auth/verify-email";case"approve-location":return"/auth/approve-location";case"login":return"/auth/login-link";default:return"/auth/verify-token"}}}]),h}(v.b),O=m=k([Object(v.a)({middleware:"unauthenticated",layout:"auth",computed:Object(y.b)({isAuthenticated:"auth/isAuthenticated"})})],m),_=r(11),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return"loading"===t.state?r("div",[r("h1",{staticClass:"title is-4"},[t._v("Loading...")]),t._v(" "),r("div",{staticClass:"content"})]):"success"===t.state?r("div",["email-verify"===t.subject?r("h1",{staticClass:"title is-4"},[t._v("Email verified")]):r("h1",{staticClass:"title is-4"},[t._v("Success")]),t._v(" "),r("div",{staticClass:"content"},["email-verify"===t.subject?r("p",[t._v("\n      Your email was successfully verified.\n    ")]):t._e(),t._v(" "),t.isAuthenticated?r("b-button",{attrs:{tag:"nuxt-link",to:"/",type:"is-primary"}},[t._v("Go to dashboard →")]):r("b-button",{attrs:{tag:"nuxt-link",to:"/auth/login",type:"is-primary"}},[t._v("Go to login →")])],1)]):r("div",[r("h1",{staticClass:"title is-4"},[t._v("Error")]),t._v(" "),r("div",{staticClass:"content"})])}),[],!1,null,null,null);e.default=component.exports}}]);