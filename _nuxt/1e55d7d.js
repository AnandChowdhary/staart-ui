(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{240:function(t,e,n){var content=n(258);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(39).default)("74acf696",content,!0,{sourceMap:!1})},257:function(t,e,n){"use strict";n(240)},258:function(t,e,n){(e=n(38)(!1)).push([t.i,"figure.image[data-v-461cc89d]{margin-right:.5rem}",""]),t.exports=e},289:function(t,e,n){"use strict";n.r(e);n(15),n(16),n(10),n(37);var r=n(231),o=(n(26),n(31),n(8)),c=n(13),l=n(53),d=n(19),f=n(20),h=n(9),v=n(7),y=n(33),m=n(253),w=n.n(m);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var x=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},j=n(252),O=function(t){Object(d.a)(v,t);var e,n,f,h=k(v);function v(){var t;return Object(c.a)(this,v),(t=h.apply(this,arguments)).loading=!1,t.loadingMore=!1,t.sessions={data:[]},t}return Object(l.a)(v,[{key:"created",value:(f=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get());case 1:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getIcon",value:function(t,e){var n,r;if("CountryCode"===e)return w()(t.countryCode);var o=new j(t.userAgent);return w()(null===(r=null===(n=o["get".concat(e)])||void 0===n?void 0:n.call())||void 0===r?void 0:r.name)}},{key:"getCaption",value:function(t,e){var n,r;return"CountryCode"===e?["city","region"].map((function(i){return t[i]})).filter((function(i){return i})).join(", "):null===(r=null===(n=new j(t.userAgent)["get".concat(e)])||void 0===n?void 0:n.call())||void 0===r?void 0:r.name}},{key:"get",value:(n=Object(o.a)(regeneratorRuntime.mark((function t(){var e,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.$axios.get("/users/".concat(this.$route.params.id,"/sessions?take=10&orderBy=id:desc").concat(this.sessions.data.length?"&after=".concat(this.sessions.data[this.sessions.data.length-1].id):""));case 4:n=t.sent,data=n.data,(e=this.sessions.data).push.apply(e,Object(r.a)(data.data||[])),this.sessions.hasMore=data.hasMore,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return n.apply(this,arguments)})},{key:"deleteSession",value:(e=Object(o.a)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$buefy.dialog.confirm({title:"Logging out",message:"Are you sure you want to log out of this session?",confirmText:"Yes, logout",cancelText:"No, don't logout",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.loading=!0,t.prev=1,t.next=4,n.$axios.delete("/users/".concat(n.$route.params.id,"/sessions/").concat(e));case 4:t.sent.data,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:return t.next=12,n.get();case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()});case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),v}(y.b),R=O=x([Object(y.a)({middleware:"authenticated",layout:"users"})],O),_=(n(257),n(11)),component=Object(_.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"is-size-4 mb-4"},[t._v("Sessions")]),t._v(" "),n("b-table",{attrs:{loading:t.loading&&!t.sessions.data.length,data:t.sessions.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"}},[n("b-table-column",{attrs:{label:"Session"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(["Browser","OS","CountryCode"],(function(r,i){return n("b-tooltip",{key:"t"+i+r,attrs:{label:t.getCaption(e.row,r)}},[t.getCaption(e.row,r)?n("figure",{staticClass:"image is-24x24"},[n("img",{staticClass:"is-rounded",attrs:{src:t.getIcon(e.row,r)}})]):t._e()])}))}}])}),t._v(" "),n("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Logged in"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(new Date(e.row.createdAt).toLocaleString()))]}}])}),t._v(" "),n("b-table-column",{attrs:{"cell-class":"has-text-right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-tooltip",{attrs:{label:"Logout"}},[n("b-button",{attrs:{type:"is-danger","icon-right":"logout-variant"},on:{click:function(n){return t.deleteSession(e.row.id)}}})],1)]}}])})],1),t._v(" "),n("div",{staticClass:"has-text-centered"},[t.sessions.hasMore?n("b-button",{attrs:{"icon-right":"arrow-down",loading:t.loading},on:{click:t.get}},[t._v("Load more sessions")]):t._e()],1)],1)}),[],!1,null,"461cc89d",null);e.default=component.exports}}]);