(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{273:function(e,t,r){"use strict";r.r(t);r(15),r(16),r(10),r(37),r(61),r(31);var n=r(8),o=r(13),l=r(53),c=r(19),d=r(20),f=r(9),h=r(7),v=r(33);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var w=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l},y=function(e){Object(c.a)(d,e);var t,r=m(d);function d(){var e;return Object(o.a)(this,d),(e=r.apply(this,arguments)).email="",e.password="",e.loading=!1,e.hasPasswordless=!1,e}return Object(l.a)(d,[{key:"login",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,data,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.$axios.post("/auth/login",{email:this.email,password:this.hasPasswordless?void 0:this.password});case 6:if(n=e.sent,"login-link-sent"!==(data=n.data).message){e.next=12;break}this.$buefy.toast.open({message:"We've sent you a login link on your email",type:"is-success"}),e.next=21;break;case 12:return e.next=14,this.$store.dispatch("auth/loginWithTokens",data);case 14:if("2fa"!==e.sent){e.next=17;break}return e.abrupt("return",this.$router.replace("/auth/2fa"));case 17:if(o=this.$store.state.auth.user.memberships,null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.length){e.next=20;break}return e.abrupt("return",this.$router.replace("/onboarding/user"));case 20:this.$router.replace("/teams/".concat(null===(r=null==o?void 0:o.data[0])||void 0===r?void 0:r.groupId));case 21:e.next=25;break;case 23:e.prev=23,e.t0=e.catch(3);case 25:this.loading=!1,this.email="",this.password="";case 28:case"end":return e.stop()}}),e,this,[[3,23]])}))),function(){return t.apply(this,arguments)})}]),d}(v.b),k=y=w([Object(v.a)({middleware:"unauthenticated",layout:"auth"})],y),x=r(11),component=Object(x.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"title is-4"},[e._v("Login")]),e._v(" "),r("div",{staticClass:"content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("b-field",{attrs:{label:"Email"}},[r("b-input",{attrs:{type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),r("b-field",{directives:[{name:"show",rawName:"v-show",value:!e.hasPasswordless,expression:"!hasPasswordless"}],attrs:{label:"Password"}},[r("b-input",{attrs:{type:"password","password-reveal":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),r("b-field",[r("b-checkbox",{model:{value:e.hasPasswordless,callback:function(t){e.hasPasswordless=t},expression:"hasPasswordless"}},[r("span",[e._v("Use passwordless login")]),e._v(" "),r("b-tooltip",{attrs:{label:"We'll send you a magic link over email"}},[r("b-icon",{attrs:{icon:"help-circle",size:"is-small"}})],1)],1)],1),e._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loading}},[e.hasPasswordless?r("span",[e._v("Send a login link")]):r("span",[e._v("Login to your account")])])],1),e._v(" "),r("p",[r("nuxt-link",{attrs:{to:"/auth/forgot"}},[e._v("Forgot your password?")])],1),e._v(" "),r("p",[r("nuxt-link",{attrs:{to:"/auth/register"}},[e._v("Create an account")])],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);