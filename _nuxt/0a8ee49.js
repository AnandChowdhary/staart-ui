(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{231:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(83);var c=n(106);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},242:function(e,t,n){var r=n(21);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},243:function(e,t,n){var content=n(265);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(39).default)("4fb2ed53",content,!0,{sourceMap:!1})},261:function(e,t,n){"use strict";var strong=n(262),r=n(242);e.exports=n(263)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return strong.def(r(this,"Set"),e=0===e?0:e,e)}},strong)},262:function(e,t,n){"use strict";var r=n(28).f,c=n(86),o=n(154),l=n(46),f=n(152),d=n(153),v=n(108),h=n(157),k=n(109),m=n(22),y=n(151).fastKey,_=n(242),x=m?"_s":"size",T=function(e,t){var n,r=y(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,v){var h=e((function(e,r){f(e,h,t,"_i"),e._t=t,e._i=c(null),e._f=void 0,e._l=void 0,e[x]=0,null!=r&&d(r,n,e[v],e)}));return o(h.prototype,{clear:function(){for(var e=_(this,t),data=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete data[n.i];e._f=e._l=void 0,e[x]=0},delete:function(e){var n=_(this,t),r=T(n,e);if(r){var c=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=c),c&&(c.p=o),n._f==r&&(n._f=c),n._l==r&&(n._l=o),n[x]--}return!!r},forEach:function(e){_(this,t);for(var n,r=l(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!T(_(this,t),e)}}),m&&r(h.prototype,"size",{get:function(){return _(this,t)[x]}}),h},def:function(e,t,n){var r,c,o=T(e,t);return o?o.v=n:(e._l=o={i:c=y(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[x]++,"F"!==c&&(e._i[c]=o)),e},getEntry:T,setStrong:function(e,t,n){v(e,t,(function(e,n){this._t=_(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?h(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,h(1))}),n?"entries":"values",!n,!0),k(t)}}},263:function(e,t,n){"use strict";var r=n(14),c=n(17),o=n(32),l=n(154),meta=n(151),f=n(153),d=n(152),v=n(21),h=n(29),k=n(107),m=n(73),y=n(158);e.exports=function(e,t,n,_,x,T){var w=r[e],O=w,R=x?"set":"add",j=O&&O.prototype,$={},D=function(e){var t=j[e];o(j,e,"delete"==e||"has"==e?function(a){return!(T&&!v(a))&&t.call(this,0===a?0:a)}:"get"==e?function(a){return T&&!v(a)?void 0:t.call(this,0===a?0:a)}:"add"==e?function(a){return t.call(this,0===a?0:a),this}:function(a,b){return t.call(this,0===a?0:a,b),this})};if("function"==typeof O&&(T||j.forEach&&!h((function(){(new O).entries().next()})))){var S=new O,A=S[R](T?{}:-0,1)!=S,I=h((function(){S.has(1)})),E=k((function(e){new O(e)})),z=!T&&h((function(){for(var e=new O,t=5;t--;)e[R](t,t);return!e.has(-0)}));E||((O=t((function(t,n){d(t,O,e);var r=y(new w,t,O);return null!=n&&f(n,x,r[R],r),r}))).prototype=j,j.constructor=O),(I||z)&&(D("delete"),D("has"),x&&D("get")),(z||A)&&D(R),T&&j.clear&&delete j.clear}else O=_.getConstructor(t,e,x,R),l(O.prototype,n),meta.NEED=!0;return m(O,e),$[e]=O,c(c.G+c.W+c.F*(O!=w),$),T||_.setStrong(O,e,x),O}},264:function(e,t,n){"use strict";n(243)},265:function(e,t,n){(t=n(38)(!1)).push([e.i,"dl[data-v-193537ab]{-moz-columns:300px 2;columns:300px 2;line-height:1.8}dd[data-v-193537ab]{margin-left:1rem}",""]),e.exports=t},298:function(e,t,n){"use strict";n.r(t);n(15),n(16),n(37),n(27),n(10),n(40),n(261);var r=n(231),c=(n(26),n(31),n(8)),o=n(13),l=n(53),f=n(19),d=n(20),v=n(9),h=n(7),k=n(33);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(v.a)(e);if(t){var c=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var y=function(e,t,n,desc){var r,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(c<3?r(o):c>3?r(t,n,o):r(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},_=function(e){Object(f.a)(y,e);var t,n,d,v,h,k=m(y);function y(){var e;return Object(o.a)(this,y),(e=k.apply(this,arguments)).loading=!1,e.loadingUpdate=!1,e.loadingDelete=!1,e.accessToken={},e.scopes=[],e.scopeOptions={},e}return Object(l.a)(y,[{key:"created",value:(h=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getScopeOptions(),e.abrupt("return",this.get());case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getScopeOptions",value:(v=Object(c.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/users/".concat(this.$route.params.id,"/security/access-token-scopes"));case 2:t=e.sent,data=t.data,this.scopeOptions=data;case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"get",value:(d=Object(c.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/users/".concat(this.$route.params.id,"/access-tokens/").concat(this.$route.params.accessTokenId));case 4:t=e.sent,data=t.data,this.accessToken=data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.$router.push("/users/".concat(this.$route.params.id,"/access-tokens"));case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"save",value:(n=Object(c.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingUpdate){e.next=2;break}return e.abrupt("return");case 2:return this.loadingUpdate=!0,e.prev=3,e.next=6,this.$axios.patch("/users/".concat(this.$route.params.id,"/access-tokens/").concat(this.$route.params.accessTokenId),{name:this.accessToken.name,scopes:Object(r.a)(new Set(this.scopes)),description:this.accessToken.description,ipRestrictions:this.accessToken.ipRestrictions,referrerRestrictions:this.accessToken.referrerRestrictions});case 6:t=e.sent,data=t.data,this.accessToken=data.updated,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:this.loadingUpdate=!1;case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(){return n.apply(this,arguments)})},{key:"deleteAccessToken",value:(t=Object(c.a)(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingDelete){e.next=2;break}return e.abrupt("return");case 2:this.$buefy.dialog.confirm({title:"Deleting accessToken",message:"Are you sure you want to delete your access token <strong>".concat(n,"</strong>? This action is not reversible, and this access token will stop working immediately."),confirmText:"Yes, delete accessToken",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.loadingDelete=!0,e.prev=1,e.next=4,r.$axios.delete("/users/".concat(r.$route.params.id,"/access-tokens/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:r.$router.push("/users/".concat(r.$route.params.id,"/access-tokens"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),y}(k.b),x=_=y([Object(k.a)({middleware:"authenticated",layout:"users"})],_),T=(n(264),n(11)),component=Object(T.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"is-size-4 mb-4"},[n("b-button",{attrs:{tag:"nuxt-link",to:"/users/"+e.$route.params.id+"/access-tokens","icon-right":"arrow-left"}}),e._v(" "),n("span",[e._v("Access Token")])],1),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("b-field",{attrs:{label:"Name"}},[n("b-input",{attrs:{type:"text"},model:{value:e.accessToken.name,callback:function(t){e.$set(e.accessToken,"name",t)},expression:"accessToken.name"}})],1),e._v(" "),n("b-field",{attrs:{label:"Access token"}},[n("b-input",{attrs:{type:"text",readonly:""},model:{value:e.accessToken.accessToken,callback:function(t){e.$set(e.accessToken,"accessToken",t)},expression:"accessToken.accessToken"}})],1),e._v(" "),n("b-field",{attrs:{label:"Description"}},[n("b-input",{attrs:{type:"textarea"},model:{value:e.accessToken.description,callback:function(t){e.$set(e.accessToken,"description",t)},expression:"accessToken.description"}})],1),e._v(" "),n("b-field",{attrs:{label:"Scopes"}},[n("dl",e._l(Object.keys(e.scopeOptions),(function(t){return n("span",{key:"s"+t},[n("dt",[n("b-checkbox",{attrs:{indeterminate:e.scopes.some((function(n){return e.scopeOptions[t].map((function(i){return i.value})).includes(n)}))&&!e.scopeOptions[t].map((function(i){return i.value})).every((function(t){return e.scopes.includes(t)})),value:e.scopeOptions[t].map((function(i){return i.value})).every((function(t){return e.scopes.includes(t)}))},on:{input:function(n){return n?e.scopes.push.apply(e.scopes,e.scopeOptions[t].map((function(i){return i.value}))):e.scopes=e.scopes.filter((function(n){return!e.scopeOptions[t].map((function(i){return i.value})).includes(n)}))}}},[e._v(e._s(t))])],1),e._v(" "),e._l(e.scopeOptions[t],(function(r){return n("dd",{key:"s"+t+r.value},[n("b-checkbox",{attrs:{"native-value":r.value},model:{value:e.scopes,callback:function(t){e.scopes=t},expression:"scopes"}},[e._v("\n              "+e._s(r.name)+"\n            ")])],1)}))],2)})),0)]),e._v(" "),n("b-field",{attrs:{label:"IP address restrictions"}},[n("b-taginput",{attrs:{icon:"ip-network",placeholder:"Add an IP CIDR"},model:{value:e.accessToken.ipRestrictions,callback:function(t){e.$set(e.accessToken,"ipRestrictions",t)},expression:"accessToken.ipRestrictions"}})],1),e._v(" "),n("b-field",{attrs:{label:"Referrer restrictions"}},[n("b-taginput",{attrs:{icon:"domain-plus",placeholder:"Add a domain name"},model:{value:e.accessToken.referrerRestrictions,callback:function(t){e.$set(e.accessToken,"referrerRestrictions",t)},expression:"accessToken.referrerRestrictions"}})],1),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingUpdate}},[e._v("Update access token")])],1),e._v(" "),n("h2",{staticClass:"is-size-5 mb-3 mt-5"},[e._v("Danger zone")]),e._v(" "),n("p",{staticClass:"mb-3"},[e._v("\n    If your access token was compromized or you don't need it anymore, you can\n    delete it.\n  ")]),e._v(" "),n("b-button",{attrs:{type:"is-danger",loading:e.loadingDelete},on:{click:function(t){return e.deleteAccessToken(e.accessToken.id,e.accessToken.name||"Unnamed access token")}}},[e._v("Delete access token")]),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:e.loading},on:{"update:active":function(t){e.loading=t}}})],1)}),[],!1,null,"193537ab",null);t.default=component.exports}}]);