(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{235:function(e){e.exports=JSON.parse('{"*":"All events","update-organization":"Update team","delete-organization":"Delete team","update-organization-billing":"Update team billing","update-organization-subscription":"Update team subscription","create-organization-subscription":"Create team subscription","delete-organization-source":"Delete team source","update-organization-source":"Update team source","create-organization-source":"Create team source","update-api-key":"Update api key","create-api-key":"Create api key","delete-api-key":"Delete api key","update-domain":"Update domain","create-domain":"Create domain","delete-domain":"Delete domain","verify-domain":"Verify domain","test-webhook":"Test webhook","update-webhook":"Update webhook","create-webhook":"Create webhook","delete-webhook":"Delete webhook"}')},266:function(e,t,r){"use strict";r.r(t);r(15),r(16),r(10),r(37),r(31);var o=r(8),n=r(13),c=r(53),l=r(19),d=r(20),h=r(9),f=r(7),v=r(33),k=r(235),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length>t?"".concat(e.substring(0,t),"..."):e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(h.a)(e);if(t){var n=Object(h.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(d.a)(this,r)}}var y=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},_=function(e){Object(l.a)(v,e);var t,r,d,h,f=m(v);function v(){var e;return Object(n.a)(this,v),(e=f.apply(this,arguments)).loading=!1,e.loadingCreate=!1,e.webhookUrl="",e.webhookEvent="*",e.webhooksData=k,e.webhooks={data:[]},e.truncate=w,e}return Object(c.a)(v,[{key:"created",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"get",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/groups/".concat(this.$route.params.id,"/webhooks"));case 4:t=e.sent,data=t.data,this.webhooks=data,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"add",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingCreate=!0,e.prev=1,e.next=4,this.$axios.put("/groups/".concat(this.$route.params.id,"/webhooks"),{url:this.webhookUrl,event:this.webhookEvent});case 4:t=e.sent,data=t.data,this.webhooks.data.push(data.added),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.webhookUrl="",this.webhookEvent="*",this.loadingCreate=!1;case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"deleteWebhook",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$buefy.dialog.confirm({title:"Deleting webhook",message:"Are you sure you want to delete your webhook for <strong>".concat(r,"</strong>? This action is not reversible, and this webhook will stop triggering immediately."),confirmText:"Yes, delete webhook",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,e.next=4,n.$axios.delete("/groups/".concat(n.$route.params.id,"/webhooks/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",n.get());case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),v}(v.b),x=_=y([Object(v.a)({middleware:"authenticated",layout:"teams"})],_),R=r(11),component=Object(R.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"is-size-4 mb-4"},[e._v("Webhooks")]),e._v(" "),r("b-table",{attrs:{loading:e.loading,data:e.webhooks.data,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"}},[r("b-table-column",{attrs:{sortable:"",field:"url",label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.truncate(t.row.url)))]),e._v(" "),t.row.isActive?r("b-tooltip",{attrs:{label:"Active"}},[r("b-icon",{attrs:{icon:"calendar-check",type:"is-success"}})],1):r("b-tooltip",{attrs:{label:"Inactive"}},[r("b-icon",{attrs:{icon:"calendar-remove",type:"is-danger"}})],1)]}}])}),e._v(" "),r("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Event"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(e.webhooksData[t.row.event]||t.row.event)+"\n    ")]}}])}),e._v(" "),r("b-table-column",{attrs:{"cell-class":"has-text-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-tooltip",{attrs:{label:"Edit"}},[r("b-button",{attrs:{tag:"nuxt-link",to:"/teams/"+e.$route.params.id+"/developers/webhooks/"+t.row.id,type:"is-primary","icon-right":"pencil",outlined:""}})],1),e._v(" "),r("b-tooltip",{attrs:{label:"Delete"}},[r("b-button",{attrs:{type:"is-danger","icon-right":"delete",outlined:""},on:{click:function(r){return e.deleteWebhook(t.row.id,e.webhooksData[t.row.event]||t.row.event)}}})],1)]}}])})],1),e._v(" "),r("h2",{staticClass:"is-size-5 mb-3 mt-5"},[e._v("Create a webhook")]),e._v(" "),r("p",{staticClass:"mb-3"},[e._v("\n    You'll be able to add event restrictions and a secret key after creating\n    the webhook.\n  ")]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.add(t)}}},[r("div",{staticClass:"columns mb-0"},[r("div",{staticClass:"column"},[r("b-field",{attrs:{label:"URL"}},[r("b-input",{attrs:{type:"url",required:""},model:{value:e.webhookUrl,callback:function(t){e.webhookUrl=t},expression:"webhookUrl"}})],1)],1),e._v(" "),r("div",{staticClass:"column"},[r("b-field",{attrs:{label:"Event"}},[r("b-select",{attrs:{placeholder:"Select an event",expanded:"",required:""},model:{value:e.webhookEvent,callback:function(t){e.webhookEvent=t},expression:"webhookEvent"}},e._l(e.webhooksData,(function(t,o){return r("option",{key:"t"+o+t,domProps:{value:o}},[e._v(e._s(t))])})),0)],1)],1)]),e._v(" "),r("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingCreate}},[e._v("Create webhook")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);