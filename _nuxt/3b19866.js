(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{284:function(e,t,n){"use strict";n.r(t);n(15),n(16),n(10),n(37),n(31);var r=n(8),c=n(13),o=n(53),l=n(19),d=n(20),f=n(9),h=n(7),m=n(33);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var c=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var v=function(e,t,n,desc){var r,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(c<3?r(o):c>3?r(t,n,o):r(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},y=function(e){Object(l.a)(m,e);var t,n,d,f,h=k(m);function m(){var e;return Object(c.a)(this,m),(e=h.apply(this,arguments)).loading=!1,e.loadingCreate=!1,e.accessTokenName="",e.accessTokens={data:[]},e.defaultOpenedDetails=[],e}return Object(o.a)(m,[{key:"created",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get());case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"get",value:(d=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$axios.get("/users/".concat(this.$route.params.id,"/access-tokens"));case 4:t=e.sent,data=t.data,this.accessTokens=data,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"add",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingCreate=!0,e.prev=1,e.next=4,this.$axios.put("/users/".concat(this.$route.params.id,"/access-tokens"),{name:this.accessTokenName?this.accessTokenName:void 0});case 4:t=e.sent,data=t.data,this.accessTokens.data.push(data.added),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:this.accessTokenName="",this.loadingCreate=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"deleteAccessToken",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$buefy.dialog.confirm({title:"Deleting access token",message:"Are you sure you want to delete your access token <strong>".concat(n,"</strong>? This action is not reversible, and this access token will stop working immediately."),confirmText:"Yes, delete access token",cancelText:"No, don't delete",type:"is-danger",hasIcon:!0,trapFocus:!0,onConfirm:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.loading=!0,e.prev=1,e.next=4,c.$axios.delete("/users/".concat(c.$route.params.id,"/access-tokens/").concat(t));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",c.get());case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),m}(m.b),w=y=v([Object(m.a)({middleware:"authenticated",layout:"users"})],y),O=n(11),component=Object(O.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"is-size-4 mb-4"},[e._v("Access Tokens")]),e._v(" "),n("b-table",{attrs:{loading:e.loading,data:e.accessTokens.data,"opened-detailed":e.defaultOpenedDetails,detailed:"","detail-key":"id","show-detail-icon":!1,"default-sort-direction":"asc","sort-icon":"arrow-up","sort-icon-size":"is-small"},scopedSlots:e._u([{key:"detail",fn:function(t){return t.row?[e._v("\n      Access token:\n      "),n("code",[e._v(e._s(t.row.accessToken))])]:void 0}}],null,!0)},[n("b-table-column",{attrs:{sortable:"",field:"name",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name||"Unnamed token"))]}}])}),e._v(" "),n("b-table-column",{attrs:{sortable:"",field:"createdAt",label:"Added"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(new Date(t.row.createdAt).toLocaleDateString()))]}}])}),e._v(" "),n("b-table-column",{attrs:{"cell-class":"has-text-right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-tooltip",{attrs:{label:e.defaultOpenedDetails.includes(t.row.id)?"Hide":"View"}},[e.defaultOpenedDetails.includes(t.row.id)?n("b-button",{attrs:{"icon-right":"eye-off",type:"is-primary",outlined:""},on:{click:function(n){e.defaultOpenedDetails=e.defaultOpenedDetails.filter((function(i){return i!==t.row.id}))}}}):n("b-button",{attrs:{"icon-right":"eye",type:"is-primary",outlined:""},on:{click:function(n){return e.defaultOpenedDetails.push(t.row.id)}}})],1),e._v(" "),n("b-tooltip",{attrs:{label:"Edit"}},[n("b-button",{attrs:{tag:"nuxt-link",to:"/users/"+e.$route.params.id+"/access-tokens/"+t.row.id,type:"is-primary","icon-right":"pencil",outlined:""}})],1),e._v(" "),n("b-tooltip",{attrs:{label:"Delete"}},[n("b-button",{attrs:{type:"is-danger","icon-right":"delete",outlined:""},on:{click:function(n){return e.deleteAccessToken(t.row.id,t.row.name||"Unnamed token")}}})],1)]}}])})],1),e._v(" "),n("h2",{staticClass:"is-size-5 mb-3 mt-5"},[e._v("Create an access token")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.add(t)}}},[n("b-field",{attrs:{label:"Name"}},[n("b-input",{attrs:{type:"text"},model:{value:e.accessTokenName,callback:function(t){e.accessTokenName=t},expression:"accessTokenName"}})],1),e._v(" "),n("b-button",{attrs:{type:"is-primary","native-type":"submit",loading:e.loadingCreate}},[e._v("Create access token")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);